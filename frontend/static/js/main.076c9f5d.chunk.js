(this["webpackJsonpkyle-site-v2"]=this["webpackJsonpkyle-site-v2"]||[]).push([[0],{113:function(e,t,a){},114:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"isAuthenticated",(function(){return v})),a.d(n,"loading",(function(){return y})),a.d(n,"user",(function(){return g})),a.d(n,"playerVolume",(function(){return _})),a.d(n,"autoPlayClip",(function(){return A}));var r={};a.r(r),a.d(r,"login",(function(){return P})),a.d(r,"checkAuthentication",(function(){return k})),a.d(r,"logout",(function(){return w}));var c=a(0),l=a.n(c),s=a(46),i=a.n(s),u=a(4),o=a.n(u),p=a(7),m=a(8),d=a(47),E=a.n(d),f=a(13),b=a(5),h=new(a.n(b).a)({framework:l.a}),v=h.State(!1),y=h.State(!0),g=h.State(null),_=h.State(.1).persist("player_volume"),A=h.State(!0).persist("auto_play_clip"),C=a(48),O=a(49),S=(a(104),O.a.initializeApp({apiKey:"AIzaSyAYWnBFlWlBDdib6V_-ZTD3L_GaM_wGvgc",authDomain:Object({NODE_ENV:"production",PUBLIC_URL:"/kyle-clip/frontend",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_FIREBASE_API_KEY:"AIzaSyAYWnBFlWlBDdib6V_-ZTD3L_GaM_wGvgc",REACT_APP_FIREBASE_APP_id:"1:999816094584:web:0068f248f006adf2189e8d",REACT_APP_FIREBASE_AUTH_DOMAIN:"kyle-clips.firebaseapp.com",REACT_APP_FIREBASE_MESSAGE_SENDER_ID:"999816094584",REACT_APP_FIREBASE_PROJECT_ID:"kyle-clips",REACT_APP_FIREBASE_STORAGE_BUCKET:"kyle-clips.appspot.com"}).REACT_APP_FIREBAS_AUTH_DOMAIN,projectId:"kyle-clips",storageBucket:"kyle-clips.appspot.com",messagingSenderId:"999816094584",appId:"1:999816094584:web:0068f248f006adf2189e8d"})),P=function(){var e=Object(p.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.auth().signInWithEmailAndPassword("kyle@clips.com",t);case 3:return e.abrupt("return",{error:!1,message:null});case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",{error:!0,message:e.t0.message});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(p.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&(N.state.isAuthenticated.set(!0),N.state.user.set(t)),N.state.loading.set(!1);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(p.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N.state.isAuthenticated.set(!1),N.state.user.set(null),e.next=4,S.auth().signOut();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=h.API({baseURL:"/v1",options:{}}),N={state:Object(f.a)({},n),actions:Object(f.a)({},r),routes:Object(f.a)({},C),API:j},I=a(50),R=a.n(I),T=function(e){return l.a.createElement("div",{className:"clip-box"},l.a.createElement("div",{className:"clip-img"},l.a.createElement("div",{className:"clip-hover"},l.a.createElement("button",{onClick:e.playClip},"Play"),l.a.createElement("button",{onClick:e.removeClip},"Remove")),l.a.createElement("img",{src:e.thumbnail,alt:"thumb"})),l.a.createElement("div",{className:"title"},e.title))},B=(a(113),function(){var e=Object(b.usePulse)(N.state.autoPlayClip);return l.a.createElement("div",{className:"autoplay"},l.a.createElement("p",null,"Autoplay"),l.a.createElement("label",{className:"switch"},l.a.createElement("input",{type:"checkbox",onChange:function(e){return N.state.autoPlayClip.set(e.target.checked)},checked:e}),l.a.createElement("span",{className:"slider"})))}),D=E()("https://kyle-twitchbot.herokuapp.com"),x=function(){var e=Object(b.usePulse)(N.state.isAuthenticated),t=Object(b.usePulse)(N.state.autoPlayClip),a=Object(b.usePulse)(N.state.playerVolume),n=Object(b.usePulse)(N.state.loading),r=Object(c.useState)([]),s=Object(m.a)(r,2),i=s[0],u=s[1],d=Object(c.useState)(""),E=Object(m.a)(d,2),f=E[0],h=E[1],v=Object(c.useState)(null),y=Object(m.a)(v,2),g=y[0],_=y[1],A=Object(c.useState)(!1),C=Object(m.a)(A,2),O=C[0],P=C[1],k=Object(c.createRef)();Object(c.useEffect)((function(){D.on("message",(function(e){switch(console.log(e),e.type){case"enableClips":return P(!0);case"disableClips":return P(!1);case"newClip":return function(e){if(e){if(O||P(!0),404===e.status)return D.emit("message",{type:"nextClip",lastClip:e});_(e),console.log(e)}}(e.clip);case"clipQueue":return function(e){return u(e)}(e.clips);case"clipsEmpty":return _(null);case"clipsEnabledStaus":return P(e.status);default:return}})),S.auth().onAuthStateChanged((function(e){return N.actions.checkAuthentication(e)}))}),[]);var w=Object(c.useState)(null),j=Object(m.a)(w,2),I=j[0],x=j[1],F=function(){var e=Object(p.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.actions.login(f);case 2:(t=e.sent).error&&x(t.message);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){if(!n){var e=document.querySelector("video");e&&e.addEventListener("volumechange",(function(t){N.state.playerVolume.set(e.volume)}))}}),[n,g]),l.a.createElement("div",{className:"container"},n||e?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"main"},l.a.createElement(R.a,{ref:k,className:"clip-player",url:null!==g?g.video_url:"",playing:t,controls:!0,volume:a,onEnded:function(){var e;(e=g)&&D.emit("message",{type:"nextClip",lastClip:e.id})}})),l.a.createElement("div",{className:"bottom-block"},l.a.createElement("h1",{className:"header-text",style:{marginBottom:"1rem"}},"Controls"),l.a.createElement("section",{className:"controls"},l.a.createElement(B,null),O?l.a.createElement("button",{className:"btn red",onClick:function(){return D.emit("message",{type:"requestDisableClips"})}},"Disable Clips"):l.a.createElement("button",{className:"btn",onClick:function(){return D.emit("message",{type:"requestEnableClips"})}},"Enable Clips")),l.a.createElement("h1",{className:"header-text",style:{marginTop:"2rem"}},"Queued Clips (",i.length,")"),l.a.createElement("div",{className:"clips-list"},i&&i.map((function(e){return l.a.createElement(T,{removeClip:function(){return function(e){return D.emit("message",{type:"removeClip",clip:e})}(e.id)},playClip:function(){return function(e){return D.emit("message",{type:"playClip",clip:e})}(e.id)},slug:e.id,thumbnail:e.thumbnail_url,title:e.title})}))))):l.a.createElement("div",{className:"login"},l.a.createElement("label",null,"Login To View"),l.a.createElement("input",{type:"password",value:f,onChange:function(e){return h(e.target.value)}}),l.a.createElement("button",{onClick:F},"Login"),I&&l.a.createElement("p",{className:"error"},I)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},48:function(e,t){},52:function(e,t,a){e.exports=a(114)},85:function(e,t){}},[[52,12,13]]]);
//# sourceMappingURL=main.076c9f5d.chunk.js.map