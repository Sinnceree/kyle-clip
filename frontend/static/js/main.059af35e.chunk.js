(this["webpackJsonpkyle-site-v2"]=this["webpackJsonpkyle-site-v2"]||[]).push([[0],{120:function(e,t,n){},121:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"isAuthenticated",(function(){return g})),n.d(a,"token",(function(){return C})),n.d(a,"loading",(function(){return y})),n.d(a,"user",(function(){return _})),n.d(a,"playerVolume",(function(){return A})),n.d(a,"autoPlayClip",(function(){return k}));var r={};n.r(r),n.d(r,"toggleClips",(function(){return w})),n.d(r,"playClip",(function(){return O})),n.d(r,"removeClip",(function(){return x})),n.d(r,"nextClip",(function(){return S}));var c={};n.r(c),n.d(c,"login",(function(){return N})),n.d(c,"checkAuthentication",(function(){return T})),n.d(c,"toggleClipMode",(function(){return R})),n.d(c,"playClip",(function(){return B})),n.d(c,"removeClip",(function(){return D})),n.d(c,"nextClip",(function(){return F})),n.d(c,"logout",(function(){return W}));var u=n(3),i=n.n(u),s=n(52),o=n.n(s),l=n(5),p=n.n(l),f=n(9),m=n(13),d=n(53),v=n.n(d),h=n(20),E=n(10),b=new(n.n(E).a)({framework:i.a}),g=b.State(!1),C=b.State("").persist("auth_token"),y=b.State(!0),_=b.State(null),A=b.State(.1).persist("player_volume"),k=b.State(!0).persist("auto_play_clip"),w=function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.post("toggleClips/",{toggle:t});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.post("playClip/",{clipId:t});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.post("removeClip/",{clipId:t});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.post("nextClip/",{clipId:t});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=n(56),P=n(54),I=(n(112),P.a.initializeApp({apiKey:"AIzaSyAYWnBFlWlBDdib6V_-ZTD3L_GaM_wGvgc",authDomain:Object({NODE_ENV:"production",PUBLIC_URL:"/kyle-clip/frontend",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_FIREBASE_API_KEY:"AIzaSyAYWnBFlWlBDdib6V_-ZTD3L_GaM_wGvgc",REACT_APP_FIREBASE_APP_id:"1:999816094584:web:0068f248f006adf2189e8d",REACT_APP_FIREBASE_AUTH_DOMAIN:"kyle-clips.firebaseapp.com",REACT_APP_FIREBASE_MESSAGE_SENDER_ID:"999816094584",REACT_APP_FIREBASE_PROJECT_ID:"kyle-clips",REACT_APP_FIREBASE_STORAGE_BUCKET:"kyle-clips.appspot.com"}).REACT_APP_FIREBAS_AUTH_DOMAIN,projectId:"kyle-clips",storageBucket:"kyle-clips.appspot.com",messagingSenderId:"999816094584",appId:"1:999816094584:web:0068f248f006adf2189e8d"})),N=function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.auth().signInWithEmailAndPassword("kyle@clips.com",t);case 3:return e.abrupt("return",{error:!1,message:null});case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",{error:!0,message:e.t0.message});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(f.a)(p.a.mark((function e(t){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=8;break}return L.state.isAuthenticated.set(!0),L.state.user.set(t),e.next=5,null===(n=j.a.auth().currentUser)||void 0===n?void 0:n.getIdToken(!0);case 5:a=e.sent,L.state.token.set(a),L.API.config.options.headers={token:a,uid:t.uid};case 8:L.state.loading.set(!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.routes.toggleClips(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.routes.playClip(t);case 2:case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.routes.removeClip(t);case 2:case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.routes.nextClip(t);case 2:case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L.state.isAuthenticated.set(!1),L.state.user.set(null),e.next=4,I.auth().signOut();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=b.API({baseURL:"/v1",options:{}}),L={state:Object(h.a)({},a),actions:Object(h.a)({},c),routes:Object(h.a)({},r),API:M},U=n(55),V=n.n(U),G=function(e){return i.a.createElement("div",{className:"clip-box"},i.a.createElement("div",{className:"clip-img"},i.a.createElement("div",{className:"clip-hover"},i.a.createElement("button",{onClick:e.playClip},"Play"),i.a.createElement("button",{onClick:e.removeClip},"Remove")),i.a.createElement("img",{src:e.thumbnail,alt:"thumb"})),i.a.createElement("div",{className:"title"},e.title))},K=(n(120),function(){var e=Object(E.usePulse)(L.state.autoPlayClip);return i.a.createElement("div",{className:"autoplay"},i.a.createElement("p",null,"Autoplay"),i.a.createElement("label",{className:"switch"},i.a.createElement("input",{type:"checkbox",onChange:function(e){return L.state.autoPlayClip.set(e.target.checked)},checked:e}),i.a.createElement("span",{className:"slider"})))}),H=v()("https://kyle-twitchbot.herokuapp.com"),z=function(){var e=Object(E.usePulse)(L.state.isAuthenticated),t=Object(E.usePulse)(L.state.autoPlayClip),n=Object(E.usePulse)(L.state.playerVolume),a=Object(E.usePulse)(L.state.loading),r=Object(u.useState)([]),c=Object(m.a)(r,2),s=c[0],o=c[1],l=Object(u.useState)(""),d=Object(m.a)(l,2),v=d[0],h=d[1],b=Object(u.useState)(null),g=Object(m.a)(b,2),C=g[0],y=g[1],_=Object(u.useState)(!1),A=Object(m.a)(_,2),k=A[0],w=A[1],O=Object(u.createRef)();Object(u.useEffect)((function(){H.on("message",(function(e){switch(console.log(e),e.type){case"enableClips":return w(!0);case"disableClips":return w(!1);case"newClip":return function(e){if(e){if(k||w(!0),404===e.status)return L.actions.nextClip(e.id);y(e),console.log(e)}}(e.clip);case"clipQueue":return function(e){return o(e)}(e.clips);case"clipsEmpty":return y(null);case"clipsEnabledStaus":return w(e.status);default:return}})),I.auth().onAuthStateChanged((function(e){return L.actions.checkAuthentication(e)}))}),[]);var x=Object(u.useState)(null),S=Object(m.a)(x,2),j=S[0],P=S[1],N=function(){var e=Object(f.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.actions.login(v);case 2:(t=e.sent).error&&P(t.message);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(u.useEffect)((function(){if(!a){var e=document.querySelector("video");e&&e.addEventListener("volumechange",(function(t){L.state.playerVolume.set(e.volume)}))}}),[a,C]),i.a.createElement("div",{className:"container"},a||e?i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"main"},i.a.createElement(V.a,{ref:O,className:"clip-player",url:null!==C?C.video_url:"",playing:t,controls:!0,volume:n,onEnded:function(){var e;(e=C)&&L.actions.nextClip(e.id)}})),i.a.createElement("div",{className:"bottom-block"},i.a.createElement("h1",{className:"header-text",style:{marginBottom:"1rem"}},"Controls"),i.a.createElement("section",{className:"controls"},i.a.createElement(K,null),k?i.a.createElement("button",{className:"btn red",onClick:function(){return L.actions.toggleClipMode(!1)}},"Disable Clips"):i.a.createElement("button",{className:"btn",onClick:function(){return L.actions.toggleClipMode(!0)}},"Enable Clips")),i.a.createElement("h1",{className:"header-text",style:{marginTop:"2rem"}},"Queued Clips (",s.length,")"),i.a.createElement("div",{className:"clips-list"},s&&s.map((function(e){return i.a.createElement(G,{removeClip:function(){return function(e){L.actions.removeClip(e)}(e.id)},playClip:function(){return function(e){L.actions.playClip(e)}(e.id)},slug:e.id,thumbnail:e.thumbnail_url,title:e.title})}))))):i.a.createElement("div",{className:"login"},i.a.createElement("label",null,"Login To View"),i.a.createElement("input",{type:"password",value:v,onChange:function(e){return h(e.target.value)}}),i.a.createElement("button",{onClick:N},"Login"),j&&i.a.createElement("p",{className:"error"},j)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},58:function(e,t,n){e.exports=n(121)},91:function(e,t){}},[[58,12,13]]]);
//# sourceMappingURL=main.059af35e.chunk.js.map